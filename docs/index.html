<!DOCTYPE HTML>
<html>
		<head>
	    <meta charset="UTF-8" />
	    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
	    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	    <link rel="stylesheet" type="text/css" href="/ChatPharo/files/simple.css" /> 
	    <title>ChatPharo</title>
	</head>
	<body>
	
	<div id="header">
	<div id="headerSiteTitle">
	ChatPharo Documentation
	</div>
	<div id="headerPageTitle"> 
	</div>
</div>
	<div id="menu">
	<div id="toc">
		<div id="tocItem"><a href="/ChatPharo/index.html">Home</a>
		</div>
		<div id="tocItem"><a href="/ChatPharo/publications.html">Publications</a>
		</div>	
		<div id="tocItem"><a href="/ChatPharo/news/index.html">News</a>
		</div>
	</div>
</div>    <!--Closing menu -->


	<div id="mainContent">
		
		<div id="personalDetails">
		<div><img src="/ChatPharo/files/logo.png" width="128px"></div>
	</div>

	<h1>ChatPharo: Complete Technical Documentation</h1><h2>Table of Contents</h2><ol><li><a target="_blank" href="#executive-summary">Executive Summary</a></li><li><a target="_blank" href="#architecture-overview">Architecture Overview</a></li><li><a target="_blank" href="#core-components">Core Components</a></li><li><a target="_blank" href="#agent-system">Agent System</a></li><li><a target="_blank" href="#tool-system--function-calling">Tool System & Function Calling</a></li><li><a target="_blank" href="#user-interface-layer">User Interface Layer</a></li><li><a target="_blank" href="#history--conversation-management">History & Conversation Management</a></li><li><a target="_blank" href="#system-browser-integration">System Browser Integration</a></li><li><a target="_blank" href="#settings--configuration">Settings & Configuration</a></li><li>. <a target="_blank" href="#installation--setup">Installation & Setup</a></li><li>. <a target="_blank" href="#usage-guide">Usage Guide</a></li><li>. <a target="_blank" href="#extension-points">Extension Points</a></li><li>. <a target="_blank" href="#troubleshooting">Troubleshooting</a></li></ol><p>---</p><h2>Executive Summary</h2><p><strong>ChatPharo</strong> is an AI-powered coding assistant integrated directly into the Pharo Smalltalk development environment. It enables developers to interact with Large Language Models (LLMs) through a native interface, leveraging function calling to query and manipulate the live Pharo image.</p><h3>Key Features</h3><ul><li><strong>Multi-Backend Support</strong>: Compatible with Ollama (local), Google Gemini, and Mistral AI</li><li><strong>Function Calling</strong>: LLMs can query packages, classes, methods, and execute code snippets</li><li><strong>System Browser Integration</strong>: Chat tabs embedded within the browser for contextual assistance</li><li><strong>Persistent Settings</strong>: Configuration saved between sessions</li><li><strong>Tool Safety</strong>: Configurable tool execution with iteration limits</li><li><strong>Logging & Monitoring</strong>: Comprehensive activity logging for debugging and analysis</li></ul><h3>Technology Stack</h3><ul><li><strong>Language</strong>: Pharo Smalltalk (13 & 14 compatible)</li><li><strong>UI Framework</strong>: Spec2 (Pharo's native UI framework)</li><li><strong>LLM Integration</strong>: REST APIs via ZnClient</li><li><strong>Persistence</strong>: STON (Smalltalk Object Notation)</li></ul><p>---</p><h2>Architecture Overview</h2><p>ChatPharo follows a <strong>layered architecture</strong> with clear separation of concerns:</p><pre><code>┌─────────────────────────────────────────────────────────┐│                    User Interface Layer                 ││  (Spec Presenters: ChatPharoPresenter, Settings, etc.)  │└────────────────────┬────────────────────────────────────┘                     │┌────────────────────▼────────────────────────────────────┐│                   Application Layer                     ││    (ChatPharo, ChatPharoChat, ChatPharoMessage)         │└────────────────────┬────────────────────────────────────┘                     │┌────────────────────▼────────────────────────────────────┐│                    Agent Layer                          ││  (ChatPharoAgent, OllamaAgent, GeminiAgent, etc.)       │└────────────────────┬────────────────────────────────────┘                     │┌────────────────────▼────────────────────────────────────┐│                    Tool Layer                           ││   (ChatPharoTool, ChatPharoClient, BrowserEnvironment)  │└────────────────────┬────────────────────────────────────┘                     │┌────────────────────▼────────────────────────────────────┐│                 History & Persistence                   ││     (ChatPharoHistory, ChatPharoSettings, Logger)       │└─────────────────────────────────────────────────────────┘</code></pre><h3>Package Structure</h3><table><tr><th>Package</th><th>Purpose</th></tr><tr><td><strong>AI-ChatPharo</strong></td><td>Core domain models (ChatPharo, ChatPharoChat, ChatPharoMessage, ChatPharoSettings)</td></tr><tr><td><strong>AI-ChatPharo-Agent</strong></td><td>Backend agent implementations (Ollama, Gemini, Mistral, Null)</td></tr><tr><td><strong>AI-ChatPharo-Spec</strong></td><td>Spec2 UI presenters and layouts</td></tr><tr><td><strong>AI-ChatPharo-Tools</strong></td><td>Function calling infrastructure and Pharo environment tools</td></tr><tr><td><strong>AI-ChatPharo-History</strong></td><td>Conversation history management and serialization</td></tr><tr><td><strong>AI-ChatPharo-Env</strong></td><td>System Browser integration (menu commands, tab extensions)</td></tr><tr><td><strong>AI-ChatPharo-Safety</strong></td><td>Safety advisors and user confirmation dialogs</td></tr><tr><td><strong>BaselineOfAIChatPharo</strong></td><td>Metacello baseline for project loading</td></tr></table><p>---</p><h2>Core Components</h2><h3>1. ChatPharo (Application Root)</h3><p><strong>Location</strong>: <code>src/AI-ChatPharo/ChatPharo.class.st</code></p><p><strong>Responsibilities</strong>:</p><ul><li>Maintains global settings (<code>ChatPharoSettings</code>)</li><li>Manages multiple chat sessions (<code>chats</code> collection)</li><li>Spawns new chat instances</li><li>Provides class-side convenience methods for quick actions</li></ul><p><strong>Key Methods</strong>:</p><pre><code>ChatPharo >> newChat    "Creates a new chat session with a copy of the configured agent"    ChatPharo class >> ask: text    "Quick action to ask a question in a new temporary chat"    ChatPharo class >> askAboutMethod: aMethod    "Context-aware question about a specific method"</code></pre><p><strong>Example Usage</strong>:</p><pre><code>ChatPharo new presenter open.ChatPharo ask: 'How do I create a new class?'.</code></pre><p>---</p><h3>2. ChatPharoChat (Conversation Session)</h3><p><strong>Location</strong>: <code>src/AI-ChatPharo/ChatPharoChat.class.st</code></p><p><strong>Responsibilities</strong>:</p><ul><li>Manages a single conversation's messages</li><li>Maintains parallel UI (<code>ChatPharoMessage</code>) and LLM-friendly (<code>ChatPharoHistory</code>) representations</li><li>Handles asynchronous prompting via forked processes</li><li>Implements caching to avoid redundant API calls</li><li>Notifies UI when assistant responses arrive</li></ul><p><strong>Key Attributes</strong>:</p><pre><code>messages        "OrderedCollection of ChatPharoMessage (UI models)"agent           "The backend agent (Ollama, Gemini, etc.)"history         "ChatPharoHistory (LLM message format)"promptProcess   "Forked process handling current prompt"cache           "Dictionary mapping prompts to cached responses"</code></pre><p><strong>Key Methods</strong>:</p><pre><code>ChatPharoChat >> sendMessage: aText    "Adds user message, forks background process to query agent"    ChatPharoChat >> addAssistantMessage: answerText    "Records assistant response in both UI and history"    ChatPharoChat >> clearChat    "Resets conversation and cache"</code></pre><p><strong>Process Flow</strong>:</p><ol><li>User submits message via UI</li><li><code>sendMessage:</code> checks cache; if miss, forks background process</li><li>Background process calls <code>agent getResponseForPrompt:</code></li><li>Agent may trigger tool calls (function execution)</li><li>Response stored in cache and history</li><li>UI notified via <code>onAnswerReceived</code> callback</li></ol><p>---</p><h3>3. ChatPharoMessage (UI Model)</h3><p><strong>Location</strong>: <code>src/AI-ChatPharo/ChatPharoMessage.class.st</code></p><p><strong>Responsibilities</strong>:</p><ul><li>Represents a single user-assistant exchange for UI rendering</li><li>Stores user <code>content</code> and assistant <code>answer</code></li><li>Creates its own Microdown presenter on demand</li><li>Tracks user feedback (good/bad buttons)</li></ul><p><strong>Key Attributes</strong>:</p><pre><code>content         "User's question/prompt"answer          "Assistant's response"assistantLabel  "Display label (e.g., 'Assistant', 'ChatPharo')"feedback        "Boolean or nil (thumbs up/down)"presenter       "Lazy-initialized ChatPharoMessagePresenter"</code></pre><p>---</p><h3>4. ChatPharoSettings (Configuration)</h3><p><strong>Location</strong>: <code>src/AI-ChatPharo/ChatPharoSettings.class.st</code></p><p><strong>Responsibilities</strong>:</p><ul><li>Persists user configuration to <code>chatpharo/chatpharo-settings.ston</code></li><li>Manages active agent selection</li><li>Stores feature toggles (browser extension, logging, caching, etc.)</li><li>Handles maximum tool execution iterations</li></ul><p><strong>Key Attributes</strong>:</p><pre><code>agent                      "Active ChatPharoAgent instance"browserExtensionEnabled    "Enable System Browser tabs"browserToolsEnabled        "Collection of enabled tool names"maximumIterations          "Max tool call loops (default: 3)"cacheEnabled               "Enable response caching"loggingEnabled             "Enable activity logging"feedbackButtonsEnabled     "Show thumbs up/down buttons"welcomeMessageEnabled      "Show welcome message on new chats"</code></pre><p><strong>Persistence</strong>:</p><pre><code>ChatPharoSettings class >> loadOrNew    "Loads from file or creates default settings"    ChatPharoSettings class >> saveDefault    "Serializes current settings to disk"</code></pre><p>---</p><h2>Agent System</h2><h3>Abstract Base: ChatPharoAgent</h3><p><strong>Location</strong>: <code>src/AI-ChatPharo-Agent/ChatPharoAgent.class.st</code></p><p><strong>Contract</strong>:</p><ul><li><strong>Class-side queries</strong>: <code>displayName</code>, <code>isReachable</code>, <code>modelNames</code>, <code>settingsPresenterFor:</code></li><li><strong>Instance-side service</strong>: <code>getResponseForPrompt:</code> (must be overridden)</li><li><strong>State management</strong>: <code>model</code>, <code>systemPrompt</code>, <code>history</code>, <code>promptPrefix</code>, <code>response</code></li></ul><p><strong>Key Methods</strong>:</p><pre><code>ChatPharoAgent class >> displayName    "Human-readable name (e.g., 'Ollama', 'Gemini')"    ChatPharoAgent class >> isReachable    "Connectivity check (e.g., ping local server)"    ChatPharoAgent >> getResponseForPrompt: prompt    "Send prompt to LLM, return text response"    ChatPharoAgent >> copyForChat    "Create fresh instance with empty history for new chat"</code></pre><p>---</p><h3>Concrete Implementations</h3><h4>1. ChatPharoOllamaAgent (Local Models)</h4><p><strong>Location</strong>: <code>src/AI-ChatPharo-Agent/ChatPharoOllamaAgent.class.st</code></p><p><strong>Configuration</strong>:</p><ul><li><strong>Host</strong>: <code>localhost</code> (default)</li><li><strong>Port</strong>: <code>11434</code> (default)</li><li><strong>Models</strong>: Dynamically fetched via <code>/api/tags</code></li></ul><p><strong>Features</strong>:</p><ul><li>Model management (pull, delete)</li><li>Temperature control</li><li>Streaming support (future)</li></ul><p><strong>Example</strong>:</p><pre><code>agent := ChatPharoOllamaAgent new    model: 'codellama:7b';    temperature: 0.3;    yourself.</code></pre><h4>2. ChatPharoGeminiAgent (Google Cloud)</h4><p><strong>Location</strong>: <code>src/AI-ChatPharo-Agent/ChatPharoGeminiAgent.class.st</code></p><p><strong>Configuration</strong>:</p><ul><li><strong>Host</strong>: <code>generativelanguage.googleapis.com</code></li><li><strong>API Key</strong>: User-provided</li><li><strong>Models</strong>: <code>gemini-2.0-flash</code>, etc.</li></ul><p><strong>Example</strong>:</p><pre><code>agent := ChatPharoGeminiAgent new    apiKey: 'YOUR_API_KEY';    model: 'models/gemini-2.0-flash';    yourself.</code></pre><h4>3. ChatPharoMistralAgent (Mistral AI)</h4><p><strong>Location</strong>: <code>src/AI-ChatPharo-Agent/ChatPharoMistralAgent.class.st</code></p><p><strong>Status</strong>: Experimental (not fully supported)</p><p><strong>Configuration</strong>:</p><ul><li><strong>Host</strong>: <code>api.mistral.ai</code></li><li><strong>API Key</strong>: User-provided</li></ul><h4>4. ChatPharoNullAgent (Placeholder)</h4><p><strong>Location</strong>: <code>src/AI-ChatPharo-Agent/ChatPharoNullAgent.class.st</code></p><p><strong>Purpose</strong>: Default agent when no backend is configured; returns static message prompting user to configure API.</p><p>---</p><h3>Agent Lifecycle</h3><ol><li><strong>Selection</strong>: User chooses agent type in Settings → Configuration</li><li><strong>Instantiation</strong>: <code>ChatPharoSettings >> useApi:</code> creates new agent instance</li><li><strong>Configuration</strong>: User provides credentials (API keys, model selection)</li><li><strong>Validation</strong>: <code>testConnection</code> verifies connectivity</li><li><strong>Usage</strong>: Agent copied per chat session via <code>copyForChat</code></li><li><strong>Execution</strong>: <code>getResponseForPrompt:</code> orchestrates LLM interaction</li></ol><p>---</p><h2>Tool System & Function Calling</h2><h3>Architecture</h3><p>ChatPharo implements <strong>OpenAI-compatible function calling</strong> to enable LLMs to query and manipulate the Pharo environment.</p><pre><code>┌──────────────┐         ┌──────────────┐         ┌──────────────┐│   Agent      │────────▶│ ChatPharoTool│────────▶│   LLM API    ││              │         │              │         │              │└──────┬───────┘         └──────┬───────┘         └──────┬───────┘       │                        │                        │       │                        │                        │       ▼                        ▼                        ▼┌──────────────┐         ┌──────────────┐         ┌──────────────┐│ChatPharoClient│◀────── │  Response    │◀────────│ Tool Calls   ││(Function Def)│         │  (JSON)      │         │   (JSON)     │└──────────────┘         └──────────────┘         └──────────────┘</code></pre><h3>Components</h3><h4>1. ChatPharoTool (REST Client)</h4><p><strong>Location</strong>: <code>src/AI-ChatPharo-Tools/ChatPharoTool.class.st</code></p><p><strong>Responsibilities</strong>:</p><ul><li>Unified OpenAI-style REST client for all backends</li><li>Constructs <code>/chat/completions</code> requests with <code>tools</code> array</li><li>Parses <code>tool_calls</code> from LLM responses</li><li>Executes tool functions locally</li><li>Handles multi-turn tool execution loops</li></ul><p><strong>Key Methods</strong>:</p><pre><code>ChatPharoTool class >> geminiWithAPIKey:system:tools:    "Factory for Gemini backend"    ChatPharoTool >> getResponseForHistory:    "POST /chat/completions, return ChatPharoHistorySaver"    ChatPharoTool >> applyToolFunction:arguments:    "Execute tool by name with JSON arguments"</code></pre><p><strong>Request Structure</strong>:</p><pre><code>{  "model": "codellama:7b",  "messages": [    {"role": "system", "content": "You are an AI assistant..."},    {"role": "user", "content": "List packages in the image"}  ],  "tools": [    {      "type": "function",      "function": {        "name": "get_packages",        "description": "Gets all of the packages.",        "parameters": {...}      }    }  ],  "tool_choice": "auto"}</code></pre><p>---</p><h4>2. ChatPharoClient (Function Definition)</h4><p><strong>Location</strong>: <code>src/AI-ChatPharo-Tools/ChatPharoClient.class.st</code></p><p><strong>Responsibilities</strong>:</p><ul><li>Encapsulates a single tool/function</li><li>Stores name, description, JSON schema for parameters</li><li>Holds executable Smalltalk block</li></ul><p><strong>Example Definition</strong>:</p><pre><code>ChatPharoClient    name: 'get_packages'    description: 'Gets all of the packages.'    parameters: (Dictionary        with: 'type' -> 'object'        with: 'properties' -> Dictionary new        with: 'required' -> #())    block: [:arguments |        Dictionary            with: 'packages'            -> (RBBrowserEnvironment default packages                collect: [:pkg | pkg name]) sorted    ]</code></pre><p>---</p><h4>3. ChatPharoBrowserEnvironment (Pharo Tools)</h4><p><strong>Location</strong>: <code>src/AI-ChatPharo-Tools/ChatPharoBrowserEnvironment.class.st</code></p><p><strong>Responsibilities</strong>:</p><ul><li>Wraps Refactoring Browser environment</li><li>Exports read-only introspection tools</li><li>Prevents destructive operations (no class creation/deletion)</li></ul><p><strong>Available Tools</strong>:</p><table><tr><th>Tool Name</th><th>Description</th><th>Example</th></tr><tr><td><code>get_packages</code></td><td>Lists all packages</td><td><code>→ ["AI-ChatPharo", "Kernel", ...]</code></td></tr><tr><td><code>get_classes_in_packages</code></td><td>Lists classes per package</td><td><code>→ {"AI-ChatPharo": ["ChatPharo", ...]}</code></td></tr><tr><td><code>get_class_definitions</code></td><td>Class structure (superclass, ivars, etc.)</td><td><code>→ {"ChatPharo": {"superclass": "Object", ...}}</code></td></tr><tr><td><code>get_class_comments</code></td><td>Class documentation</td><td><code>→ {"ChatPharo": "The application root..."}</code></td></tr><tr><td><code>get_class_methods</code></td><td>Method source or selectors</td><td><code>→ {"ChatPharo": {"instance": {...}}}</code></td></tr><tr><td><code>get_class_subclasses</code></td><td>Subclass hierarchy</td><td><code>→ {"ChatPharoAgent": ["OllamaAgent", ...]}</code></td></tr><tr><td><code>find_methods_with_substring</code></td><td>Code search</td><td><code>→ [{"class": "ChatPharo", "selector": "newChat"}]</code></td></tr><tr><td><code>describe_package</code></td><td>Complete package overview</td><td><code>→ {"summary_per_class": {...}}</code></td></tr><tr><td><code>check_syntax</code></td><td>Validate Smalltalk code</td><td><code>→ {"syntax_ok": true}</code></td></tr><tr><td><code>open_playground</code></td><td>Open code in Playground</td><td><code>→ {"playground_opened": true}</code></td></tr></table><p><strong>Implementation Pattern</strong>:</p><pre><code>functionGetPackages    ^ ChatPharoClient        name: 'get_packages'        description: 'Gets all of the packages.'        parameters: (Dictionary with: 'type' -> 'object' ...)        block: [:arguments | self applyFunctionGetPackages: arguments]</code></pre><p>---</p><h3>Tool Execution Flow</h3><ol><li><strong>Agent sends prompt</strong> with available tools to LLM</li><li><strong>LLM responds</strong> with <code>tool_calls</code> array:<br><code></code><code>json<br>{<br>  "tool_calls": [<br>    {<br>      "id": "call_123",<br>      "type": "function",<br>      "function": {<br>        "name": "get_classes_in_packages",<br>        "arguments": "{\"packages\": [\"AI-ChatPharo\"]}"<br>      }<br>    }<br>  ]<br>}<br></code><code></code></li><li><strong>ChatPharoTool executes</strong> each tool locally via <code>applyToolFunction:arguments:</code></li><li><strong>Results appended</strong> to conversation as <code>tool</code> role messages</li><li><strong>Loop continues</strong> until LLM stops calling tools or iteration limit reached</li></ol><p>---</p><h3>Safety Features</h3><h4>Iteration Limiting</h4><p>Prevents infinite tool call loops:</p><pre><code>ChatPharoGeminiAgent >> getResponseForPrompt: userPrompt    | result max count |    max := ChatPharoSettings default maximumIterations ifNil: [1].    count := 0.    [result toolCalls notNil and: [count < max]] whileTrue: [        result := api getResponseForHistory: self history.        count := count + 1    ].    ^ result content</code></pre><h4>User Confirmation</h4><p>For potentially disruptive actions:</p><pre><code>ChatPharoSafetyAdvisor class >> confirmToolDisableOn: aPresenter    ^ aPresenter confirm: 'For optimal performance we recommend keeping all tools enabled.\nAre you sure you want to disable this tool?'</code></pre><p>---</p><h2>User Interface Layer</h2><h3>Architecture</h3><p>ChatPharo uses <strong>Spec2</strong> (Pharo's native UI framework) with a <strong>Model-View-Presenter</strong> pattern:</p><pre><code>Model (Domain)         Presenter (UI Logic)         View (Morphic)──────────────         ────────────────────         ──────────────ChatPharo          ─▶  ChatPharoPresenter      ─▶   Window + ToolbarChatPharoChat      ─▶  ChatPharoChatPresenter  ─▶   Message List + InputChatPharoMessage   ─▶  ChatPharoMessagePresenter ─▶ Microdown RendererChatPharoSettings  ─▶  ChatPharoSettingsPresenter ─▶ Tabbed Settings</code></pre><h3>Main Window: ChatPharoPresenter</h3><p><strong>Location</strong>: <code>src/AI-ChatPharo-Spec/ChatPharoPresenter.class.st</code></p><p><strong>Layout</strong>:</p><pre><code>┌────────────────────────────────────────────────────────┐│  [New Chat] [Delete] [Delete All] [Save] [Settings]   │ ← Toolbar├────────────────────────────────────────────────────────┤│  ┌──────┬──────┬──────┐                                ││  │Chat 1│Chat 2│Chat 3│                                │ ← Notebook Tabs│  └──────┴──────┴──────┘                                ││  ┌────────────────────────────────────────────────┐    ││  │  User: How do I create a class?               │    ││  │  Assistant: To create a class in Pharo...     │    ││  │  ──────────────────────────────────────────── │    │ ← Chat Messages│  │  User: Show me an example                     │    ││  │  Assistant: ```smalltalk...                   │    ││  └────────────────────────────────────────────────┘    ││  ┌────────────────────────────────────────────────┐    ││  │ Type your message here...         [Submit]    │    │ ← Input Field│  └────────────────────────────────────────────────┘    │└────────────────────────────────────────────────────────┘</code></pre><p><strong>Key Features</strong>:</p><ul><li><strong>Multi-chat tabs</strong>: Create/delete independent conversations</li><li><strong>Connection status</strong>: Real-time backend reachability indicator</li><li><strong>Export</strong>: Save conversations as JSON</li></ul><p>---</p><h3>Chat Tab: ChatPharoChatPresenter</h3><p><strong>Location</strong>: <code>src/AI-ChatPharo-Spec/ChatPharoChatPresenter.class.st</code></p><p><strong>Responsibilities</strong>:</p><ul><li>Renders message list with Microdown formatting</li><li>Handles user input submission</li><li>Updates UI when assistant responses arrive</li><li>Provides cancel button for long-running prompts</li></ul><p><strong>Message Rendering</strong>:</p><ul><li>Uses <code>MicrodownPresenter</code> for rich text (code blocks, headers, lists)</li><li>Copy-to-clipboard button (appears on hover)</li><li>Optional feedback buttons (thumbs up/down)</li></ul><p>---</p><h3>Settings Dialog: ChatPharoSettingsPresenter</h3><p><strong>Location</strong>: <code>src/AI-ChatPharo-Spec/ChatPharoSettingsPresenter.class.st</code></p><p><strong>Tabs</strong>:</p><ol><li><strong>Chat</strong>: System prompt, max iterations, tool toggles, feature flags</li><li><strong>History</strong>: View raw conversation history</li><li><strong>Configuration</strong>: Agent selection, credentials, model choice</li><li><strong>Extensions</strong> (conditional): Browser integration settings, tool selection</li></ol><p><strong>Dynamic UI</strong>:</p><ul><li>Agent-specific settings panels loaded on demand</li><li>Tool checkboxes generated from <code>ChatPharoBrowserEnvironment</code></li><li>Test connection button per agent</li></ul><p>---</p><h3>Agent Settings Presenters</h3><p>Each agent provides a custom settings panel:</p><table><tr><th>Agent</th><th>Presenter</th><th>Configuration</th></tr><tr><td>Ollama</td><td><code>ChatPharoOllamaSettingsPresenter</code></td><td>Host, port, model dropdown, temperature, model management</td></tr><tr><td>Gemini</td><td><code>ChatPharoGeminiSettingsPresenter</code></td><td>Host, API key (masked), model dropdown, temperature</td></tr><tr><td>Mistral</td><td><code>ChatPharoMistralSettingsPresenter</code></td><td>Host, API key, model dropdown</td></tr><tr><td>Null</td><td><code>ChatPharoNullSettingsPresenter</code></td><td>Info label prompting configuration</td></tr></table><p>---</p><h2>History & Conversation Management</h2><h3>ChatPharoHistory (LLM Format)</h3><p><strong>Location</strong>: <code>src/AI-ChatPharo-History/ChatPharoHistory.class.st</code></p><p><strong>Purpose</strong>: Maintains conversation in OpenAI-compatible message format for API requests.</p><p><strong>Structure</strong>:</p><pre><code>messages: OrderedCollection of ChatPharoHistoryMessage</code></pre><p><strong>Methods</strong>:</p><pre><code>addUser: text    "Append user message"    addAssistant: text    "Append assistant message"    asPromptPrefix    "Serialize as plain text for debugging"    chatMessagesOn: aStream    "Write JSON message array to stream"</code></pre><p>---</p><h3>ChatPharoHistoryMessage (Message Model)</h3><p><strong>Location</strong>: <code>src/AI-ChatPharo-History/ChatPharoHistoryMessage.class.st</code></p><p><strong>Attributes</strong>:</p><pre><code>role        "system | user | assistant | tool"content     "Message text"toolCalls   "Array of ChatPharoHistorySaverToolCall (optional)"</code></pre><p><strong>Serialization</strong>:</p><pre><code>chatMessagesOn: aStream    | msg |    msg := Dictionary with: 'role' -> role.    content ifNotNil: [msg add: 'content' -> content].    toolCalls ifNotNil: [        msg add: 'tool_calls' -> (toolCalls collect: [:tc |            tc openAIChatToolCall]) as: Array].    aStream nextPut: msg.</code></pre><p>---</p><h3>ChatPharoHistorySaverToolCall (Tool Record)</h3><p><strong>Location</strong>: <code>src/AI-ChatPharo-History/ChatPharoHistorySaverToolCall.class.st</code></p><p><strong>Attributes</strong>:</p><pre><code>id             "Unique call identifier from LLM"functionName   "Tool name (e.g., 'get_packages')"arguments      "JSON string of parameters"content        "Tool execution result (JSON)"</code></pre><p><strong>Purpose</strong>: Records tool calls for multi-turn conversations, allowing LLM to see previous tool results.</p><p>---</p><h2>System Browser Integration</h2><p>ChatPharo extends Calypso (Pharo's System Browser) with contextual AI assistance.</p><h3>Browser Tab Extension</h3><p><strong>Class</strong>: <code>ChatPharoPackageBrowser</code><br><strong>Location</strong>: <code>src/AI-ChatPharo-Env/ChatPharoPackageBrowser.class.st</code></p><p><strong>Activation</strong>:</p><pre><code>ChatPharoPackageBrowser class >> shouldBeActivatedInContext: aBrowserContext    ^ ChatPharoSettings default browserExtensionEnabled</code></pre><p><strong>Features</strong>:</p><ul><li>Tab appears when browsing packages</li><li>Agent automatically scoped to selected package via <code>packageName:</code> injection</li><li>System prompt modified to reference current package</li></ul><p><strong>Hierarchy</strong>:</p><pre><code>ChatPharoPackageBrowser         (package-level)    ↓ChatPharoClassBrowser           (class-level)    ↓ChatPharoMethodBrowser          (method-level)</code></pre><p>Each subclass narrows the agent's focus by setting <code>className:</code> or <code>methodName:</code>.</p><p>---</p><h3>Context Menu Commands</h3><h4>1. "Ask ChatPharo" Command</h4><p><strong>Class</strong>: <code>ChatPharoAskCommand</code><br><strong>Activation</strong>: Right-click on method → "Ask ChatPharo"<br><strong>Shortcut</strong>: <code>Cmd+P</code></p><p><strong>Behavior</strong>:</p><pre><code>ChatPharoAskCommand >> execute    | method |    method := element browserItem actualObject.    ChatPharo askAboutMethod: method</code></pre><p>Generates prompt:</p><pre><code>Explain what the following Smalltalk method does and highlight any potential improvements or edge cases.Class: ChatPharoSelector: newChat</code></pre><p>newChat<br>| agentCopy |<br>agentCopy := self settings agent copyForChat.<br>chats add: (ChatPharoChat new agent: agentCopy; yourself).</p><pre><code></code></pre><h4>2. "Code ChatPharo" Command</h4><p><strong>Class</strong>: <code>ChatPharoCodeCommand</code><br><strong>Activation</strong>: Right-click on method → "Code ChatPharo"<br><strong>Shortcut</strong>: <code>Cmd+Shift+K</code></p><p><strong>Behavior</strong>: Similar to Ask but prompts LLM to suggest code improvements.</p><p>---</p><h3>Editor Context Menu</h3><p><strong>Class</strong>: <code>ChatPharoCodeMenu</code><br><strong>Integration</strong>: Extends <code>RubSmalltalkCodeMode</code> (Pharo's text editor)</p><p><strong>Menu Items</strong>:</p><ul><li><strong>Ask ChatPharo</strong>: Selected text → explanation prompt</li><li><strong>Code ChatPharo</strong>: Selected text → code improvement prompt</li></ul><p><strong>Implementation</strong>:</p><pre><code>ChatPharoCodeMenu class >> menuOn: aBuilder    <contextMenu>    <RubSmalltalkCodeMenu>    settings askFeatureEnabled ifTrue: [        (aBuilder item: #'Ask ChatPharo' translated)            selector: #openChatCharo;            icon: ChatPharoIcons chatPharoIcon    ].</code></pre><p>---</p><h2>Settings & Configuration</h2><h3>File Structure</h3><p><strong>Location</strong>: <code><image-directory>/chatpharo/chatpharo-settings.ston</code></p><p><strong>Legacy Location</strong>: <code><image-directory>/chatpharo-settings.ston</code> (migrated automatically)</p><p><strong>Format</strong>: STON (Smalltalk Object Notation)</p><p><strong>Example</strong>:</p><pre><code>ChatPharoSettings {    #agent : ChatPharoOllamaAgent {        #model : 'codellama:7b',        #host : 'localhost',        #port : '11434',        #temperature : 0.3,        #systemPrompt : 'You are an AI coding assistant...'    },    #browserExtensionEnabled : true,    #browserToolsEnabled : ['get_packages', 'get_classes_in_packages', ...],    #maximumIterations : 3,    #cacheEnabled : true,    #loggingEnabled : true,    #feedbackButtonsEnabled : true,    #welcomeMessageEnabled : true,    #askFeatureEnabled : true,    #codeFeatureEnabled : true}</code></pre><p>---</p><h3>Loading & Saving</h3><pre><code>"Load settings on image startup"settings := ChatPharoSettings loadOrNew."Modify settings"settings agent: ChatPharoGeminiAgent new.settings maximumIterations: 5."Persist to disk"ChatPharoSettings saveDefault.</code></pre><p>---</p><h3>Feature Flags</h3><table><tr><th>Flag</th><th>Description</th><th>Default</th></tr><tr><td><code>browserExtensionEnabled</code></td><td>Show chat tabs in System Browser</td><td><code>false</code></td></tr><tr><td><code>browserAutoTabEnabled</code></td><td>Auto-open browser tab on selection</td><td><code>true</code></td></tr><tr><td><code>cacheEnabled</code></td><td>Cache LLM responses to avoid re-querying</td><td><code>true</code></td></tr><tr><td><code>loggingEnabled</code></td><td>Write activity to <code>chatpharo/log-chatpharo.txt</code></td><td><code>true</code></td></tr><tr><td><code>feedbackButtonsEnabled</code></td><td>Show thumbs up/down on messages</td><td><code>true</code></td></tr><tr><td><code>welcomeMessageEnabled</code></td><td>Display welcome message on new chats</td><td><code>true</code></td></tr><tr><td><code>askFeatureEnabled</code></td><td>Enable "Ask ChatPharo" in editors</td><td><code>true</code></td></tr><tr><td><code>codeFeatureEnabled</code></td><td>Enable "Code ChatPharo" in editors</td><td><code>true</code></td></tr></table><p>---</p><h2>Installation & Setup</h2><h3>Prerequisites</h3><ul><li><strong>Pharo 13 or 14</strong> (<a target="_blank" href="https://pharo.org/download">download</a>)</li><li><strong>Git</strong> (for cloning repository)</li><li><strong>Ollama</strong> (optional, for local models): <a target="_blank" href="https://ollama.com/">ollama.com</a></li></ul><p>---</p><h3>Installation via Metacello</h3><h4>Stable Release</h4><pre><code>Metacello new  githubUser: 'omarabedelkader'  project: 'ChatPharo'  commitish: 'v0.1.0'  path: 'src';  baseline: 'AIChatPharo';  load.</code></pre><h4>Development Version</h4><pre><code>Metacello new  githubUser: 'omarabedelkader'  project: 'ChatPharo'  commitish: 'main'  path: 'src';  baseline: 'AIChatPharo';  load.</code></pre><p>---</p><h3>Initial Configuration</h3><ol><li><strong>Open Settings</strong>:<br><code></code><code>smalltalk<br>ChatPharoSettings default presenter open.<br></code><code></code></li><li><strong>Select Agent</strong> (Configuration tab):<ul><li>Dropdown: Choose "Ollama", "Gemini", or "Mistral AI"</li></ul></li><li><strong>Configure Credentials</strong>:<ul><li><strong>Ollama</strong>: Verify host/port, select model</li><li><strong>Gemini</strong>: Enter API key, select model</li><li><strong>Mistral</strong>: Enter API key, select model</li></ul></li><li><strong>Test Connection</strong>: Click "Test Connection" button</li><li><strong>Adjust Features</strong> (Chat tab):<ul><li>Enable/disable browser extension</li><li>Configure tool permissions</li><li>Set maximum iterations</li></ul></li><li><strong>Save</strong>: Settings auto-save on modification</li></ol><p>---</p><h3>Ollama Setup (Local Models)</h3><ol><li><strong>Install Ollama</strong>: <a target="_blank" href="https://ollama.com/download">ollama.com/download</a></li><li><strong>Pull Model</strong>:<br><code></code><code>bash<br>ollama pull codellama:7b<br></code><code></code></li><li><strong>Verify Service</strong>:<br><code></code><code>bash<br>curl http://localhost:11434/api/tags<br></code><code></code></li><li><strong>Configure in ChatPharo</strong>:<ul><li>Settings → Configuration → Agent: "Ollama"</li><li>Model dropdown: Select "codellama:7b"</li><li>Test Connection</li></ul></li></ol><p>---</p><h2>Usage Guide</h2><h3>Quick Start</h3><pre><code>"1. Open temporary chat"ChatPharo new presenter open."2. Ask a question"ChatPharo ask: 'How do I create a Set in Pharo?'."3. Query about a method"method := ChatPharoChat >> #sendMessage:.ChatPharo askAboutMethod: method.</code></pre><p>---</p><h3>Chat Window Usage</h3><ol><li><strong>Create New Chat</strong>: Toolbar → "New Chat"</li><li><strong>Type Message</strong>: Enter prompt in input field</li><li><strong>Submit</strong>: Press Enter or click "Submit"</li><li><strong>Wait for Response</strong>: Status shows "Running..."</li><li><strong>View Answer</strong>: Rendered with Microdown formatting</li><li><strong>Copy Answer</strong>: Hover over response → click copy icon</li><li><strong>Delete Chat</strong>: Select tab → Toolbar → "Delete Chat"</li></ol><p>---</p><h3>System Browser Integration</h3><ol><li><strong>Enable Extension</strong>:<br><code></code><code>smalltalk<br>ChatPharoSettings default browserExtensionEnabled: true.<br></code><code></code></li><li><strong>Browse Package</strong>: Open System Browser → Select package</li><li><strong>See Chat Tab</strong>: New tab labeled with package name</li><li><strong>Ask Question</strong>: Type prompt relevant to package</li><li><strong>LLM Has Context</strong>: Agent automatically queries package classes/methods</li></ol><p>---</p><h3>Context Menu Actions</h3><h4>In Method Browser</h4><ol><li>Select method → Right-click</li><li>Choose:<ul><li><strong>"Ask ChatPharo"</strong> (<code>Cmd+P</code>): Explain method</li><li><strong>"Code ChatPharo"</strong> (<code>Cmd+Shift+K</code>): Suggest improvements</li></ul></li></ol><h4>In Code Editor</h4><ol><li>Highlight code snippet</li><li>Right-click → Choose:<ul><li><strong>"Ask ChatPharo"</strong>: Explain selection</li><li><strong>"Code ChatPharo"</strong>: Improve selection</li></ul></li></ol><p>---</p><h3>Advanced: Function Calling</h3><p>LLMs can query the image:</p><p><strong>User</strong>: "List all classes in the AI-ChatPharo package"</p><p><strong>LLM</strong> (internal):</p><pre><code>{  "tool_calls": [{    "function": {      "name": "get_classes_in_packages",      "arguments": "{\"packages\": [\"AI-ChatPharo\"]}"    }  }]}</code></pre><p><strong>Tool Execution</strong>:</p><pre><code>{  "classes_per_package": {    "AI-ChatPharo": [      "ChatPharo",      "ChatPharoChat",      "ChatPharoMessage",      "ChatPharoSettings",      "ChatPharoLogger"    ]  }}</code></pre><p><strong>LLM</strong> (to user): "The AI-ChatPharo package contains 5 classes: ChatPharo, ChatPharoChat, ChatPharoMessage, ChatPharoSettings, and ChatPharoLogger."</p><p>---</p><h2>Extension Points</h2><h3>Creating a Custom Agent</h3><pre><code>Object subclass: #MyCustomAgent    superclass: ChatPharoAgent    instanceVariableNames: 'endpoint apiToken'    classVariableNames: ''    package: 'MyExtension'"Implement required methods"MyCustomAgent class >> displayName    ^ 'My Custom LLM'MyCustomAgent class >> isReachable    ^ [ZnClient new get: self defaultEndpoint. true]        on: Error do: [false]MyCustomAgent class >> modelNames    ^ #('my-model-v1' 'my-model-v2')MyCustomAgent >> getResponseForPrompt: prompt    | response |    response := ZnClient new        url: endpoint, '/chat';        headerAt: 'Authorization' put: 'Bearer ', apiToken;        entity: (ZnEntity json: (self buildRequestFor: prompt));        post;        contents.    ^ (STONJSON fromString: response) at: 'text'</code></pre><p><strong>Register</strong>:</p><pre><code>ChatPharoSettings >> availableApis    ^ super availableApis, {MyCustomAgent}</code></pre><p>---</p><h3>Creating a Custom Tool</h3><pre><code>ChatPharoClient    name: 'search_web'    description: 'Searches the web and returns top 5 results.'    parameters: (Dictionary        with: 'type' -> 'object'        with: 'properties' -> (Dictionary            with: 'query' -> (Dictionary                with: 'type' -> 'string'                with: 'description' -> 'Search query'))        with: 'required' -> #('query'))    block: [:arguments |        | query results |        query := arguments at: 'query'.        results := MyWebSearchEngine search: query limit: 5.        Dictionary            with: 'results' -> (results collect: [:r |                Dictionary                    with: 'title' -> r title                    with: 'url' -> r url                    with: 'snippet' -> r snippet])    ]</code></pre><p><strong>Register</strong>:</p><pre><code>ChatPharoBrowserEnvironment >> initializeWithEnvironment: env    tools := {        self functionGetPackages.        "... existing tools ..."        self functionSearchWeb.  "<-- Add here"    }</code></pre><p>---</p><h3>Adding a Settings Page</h3><pre><code>ChatPharoSettingsPresenter >> newMyCustomTab    ^ SpPresenter new        layout: (SpBoxLayout newTopToBottom            add: (self newLabel label: 'My Custom Settings');            add: myCustomCheckbox;            yourself);        yourself"In initializePresenters:"notebook addPage: (SpNotebookPage    title: 'My Custom'    icon: (self iconNamed: #smallConfiguration)    provider: [self newMyCustomTab])</code></pre><p>---</p><h2>Troubleshooting</h2><h3>Common Issues</h3><h4>1. "No backend is configured"</h4><p><strong>Cause</strong>: <code>ChatPharoNullAgent</code> is active<br><strong>Solution</strong>:</p><ol><li>Open Settings → Configuration</li><li>Select agent from dropdown</li><li>Configure credentials</li><li>Test connection</li></ol><p>---</p><h4>2. "Connection failed" (Ollama)</h4><p><strong>Checks</strong>:</p><pre><code># Verify Ollama is runningollama list# Test APIcurl http://localhost:11434/api/version# Check portlsof -i :11434</code></pre><p><strong>Solutions</strong>:</p><ul><li>Restart Ollama service</li><li>Verify host/port in ChatPharo settings</li><li>Check firewall rules</li></ul><p>---</p><h4>3. "Invalid API key" (Gemini/Mistral)</h4><p><strong>Verify</strong>:</p><pre><code># Geminicurl -H "Authorization: Bearer YOUR_KEY" \  https://generativelanguage.googleapis.com/v1beta/models# Mistralcurl -H "Authorization: Bearer YOUR_KEY" \  https://api.mistral.ai/v1/models</code></pre><p><strong>Solutions</strong>:</p><ul><li>Regenerate API key from provider</li><li>Re-enter in masked field</li><li>Check for trailing spaces</li></ul><p>---</p><h4>4. Tools not executing</h4><p><strong>Symptoms</strong>: LLM says "I don't have access to that information"</p><p><strong>Checks</strong>:</p><ol><li>Settings → Chat → Verify tool checkboxes enabled</li><li>Settings → Chat → Max Iterations > 0</li><li>Check logs: <code><image-dir>/chatpharo/log-chatpharo.txt</code></li></ol><p><strong>Debug</strong>:</p><pre><code>"Test tool manually"env := ChatPharoBrowserEnvironment new.tool := env functionGetPackages.result := tool applyTo: Dictionary new.result inspect.</code></pre><p>---</p><h4>5. Slow responses</h4><p><strong>Optimizations</strong>:</p><ol><li>Enable caching: <code>Settings → Chat → Enable cache</code></li><li>Use local models (Ollama) for faster inference</li><li>Reduce context: Shorter system prompts</li><li>Limit tools: Disable unused tools in browser extension</li></ol><p>---</p><h4>6. Memory issues</h4><p><strong>Symptoms</strong>: Image freezes, high CPU usage</p><p><strong>Solutions</strong>:</p><ol><li>Limit max iterations: <code>Settings → Chat → Max iterations = 1</code></li><li>Disable caching if memory constrained</li><li>Use smaller models (e.g., <code>codellama:7b</code> vs <code>codellama:34b</code>)</li><li>Close unused chat tabs</li></ol><p>---</p><h3>Logging</h3><p><strong>Location</strong>: <code><image-directory>/chatpharo/log-chatpharo.txt</code></p><p><strong>Sample Entry</strong>:</p><pre><code>[2025-01-15 14:23:45] [FRONTEND] Chat tab send triggered  Details:    chatId: 12345678    text: How do I create a class?    agent: Ollama[2025-01-15 14:23:47] [BACKEND] Assistant response recorded  Details:    chatId: 12345678    agent: Ollama    assistantLabel: Assistant    response: To create a class in Pharo...</code></pre><p><strong>Enable/Disable</strong>:</p><pre><code>ChatPharoSettings default loggingEnabled: true.ChatPharoLogger deleteLogFile.  "Clear log"</code></pre><p>---</p><h3>Reset Settings</h3><pre><code>ChatPharoSettings resetDefault.  "Delete settings file"ChatPharoSettings default presenter open.  "Reconfigure"</code></pre><p>---</p><h2>Appendix</h2><h3>Class Reference</h3><table><tr><th>Class</th><th>Package</th><th>Responsibility</th></tr><tr><td><code>ChatPharo</code></td><td>AI-ChatPharo</td><td>Application root, manages global state</td></tr><tr><td><code>ChatPharoChat</code></td><td>AI-ChatPharo</td><td>Single conversation session</td></tr><tr><td><code>ChatPharoMessage</code></td><td>AI-ChatPharo</td><td>UI model for one user-assistant exchange</td></tr><tr><td><code>ChatPharoSettings</code></td><td>AI-ChatPharo</td><td>Persistent configuration</td></tr><tr><td><code>ChatPharoLogger</code></td><td>AI-ChatPharo</td><td>Activity logging</td></tr><tr><td><code>ChatPharoAgent</code></td><td>AI-ChatPharo-Agent</td><td>Abstract LLM backend</td></tr><tr><td><code>ChatPharoOllamaAgent</code></td><td>AI-ChatPharo-Agent</td><td>Ollama integration</td></tr><tr><td><code>ChatPharoGeminiAgent</code></td><td>AI-ChatPharo-Agent</td><td>Google Gemini integration</td></tr><tr><td><code>ChatPharoMistralAgent</code></td><td>AI-ChatPharo-Agent</td><td>Mistral AI integration (experimental)</td></tr><tr><td><code>ChatPharoNullAgent</code></td><td>AI-ChatPharo-Agent</td><td>Placeholder agent</td></tr><tr><td><code>ChatPharoPresenter</code></td><td>AI-ChatPharo-Spec</td><td>Main window UI</td></tr><tr><td><code>ChatPharoChatPresenter</code></td><td>AI-ChatPharo-Spec</td><td>Chat tab UI</td></tr><tr><td><code>ChatPharoMessagePresenter</code></td><td>AI-ChatPharo-Spec</td><td>Message rendering</td></tr><tr><td><code>ChatPharoSettingsPresenter</code></td><td>AI-ChatPharo-Spec</td><td>Settings dialog</td></tr><tr><td><code>ChatPharoTool</code></td><td>AI-ChatPharo-Tools</td><td>OpenAI-style REST client</td></tr><tr><td><code>ChatPharoClient</code></td><td>AI-ChatPharo-Tools</td><td>Function/tool definition</td></tr><tr><td><code>ChatPharoBrowserEnvironment</code></td><td>AI-ChatPharo-Tools</td><td>Pharo introspection tools</td></tr><tr><td><code>ChatPharoHistory</code></td><td>AI-ChatPharo-History</td><td>Conversation history (LLM format)</td></tr><tr><td><code>ChatPharoHistoryMessage</code></td><td>AI-ChatPharo-History</td><td>Single message in history</td></tr><tr><td><code>ChatPharoHistorySaver</code></td><td>AI-ChatPharo-History</td><td>History builder</td></tr><tr><td><code>ChatPharoHistorySaverToolCall</code></td><td>AI-ChatPharo-History</td><td>Tool call record</td></tr><tr><td><code>ChatPharoPackageBrowser</code></td><td>AI-ChatPharo-Env</td><td>System Browser extension (package)</td></tr><tr><td><code>ChatPharoClassBrowser</code></td><td>AI-ChatPharo-Env</td><td>System Browser extension (class)</td></tr><tr><td><code>ChatPharoMethodBrowser</code></td><td>AI-ChatPharo-Env</td><td>System Browser extension (method)</td></tr><tr><td><code>ChatPharoAskCommand</code></td><td>AI-ChatPharo-Env</td><td>"Ask ChatPharo" menu command</td></tr><tr><td><code>ChatPharoCodeCommand</code></td><td>AI-ChatPharo-Env</td><td>"Code ChatPharo" menu command</td></tr><tr><td><code>ChatPharoSafetyAdvisor</code></td><td>AI-ChatPharo-Safety</td><td>User confirmation dialogs</td></tr></table><p>---</p><h3>Contributors</h3><ul><li><strong>Omar AbedelKader</strong> - Original author and maintainer</li></ul><h3>License</h3><p>MIT License - See <code>LICENSE</code> file</p><h3>Repository</h3><p><a target="_blank" href="https://github.com/omarabedelkader/ChatPharo"><a target="_blank" href="https://github.com/omarabedelkader/ChatPharo">https://github.com/omarabedelkader/ChatPharo</a></a></p><p>---</p><h3>Acknowledgments</h3><ul><li><strong>Pharo Community</strong> - For the robust Smalltalk environment</li><li><strong>Anthropic/OpenAI</strong> - For pioneering function calling</li><li><strong>Ollama Team</strong> - For making local LLMs accessible</li></ul><p>---</p><p><strong>Document Version</strong>: 1.0<br><strong>Last Updated</strong>: September 2025<br><strong>Compatible with</strong>: Pharo 13, Pharo 14</p>
	
	
<br>
<p>
  © 2025 Omar AbedelKader
</p>
	
	</div>
	
	</body>
	

</html>